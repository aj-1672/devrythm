{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Devrythm | Login{% endblock %}</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=input,progress_activity"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'login.css' %}" />
  </head>

  <body>
    <div class="container">
      <div class="left">
        <img src="{% static 'images/code_vector.png' %}" alt="Illustration" />
      </div>
      <div class="right">
        <div class="form-box">
          <h1>Still chasing bugs or you<br />becoming one?</h1>
          {% if messages %}
          <ul class="messages">
            {% for message in messages %}
            <li class="{{ message.tags }}">{{ message }}</li>
            {% endfor %}
          </ul>
          {% endif %}

          <form method="post">
            {% csrf_token %}
            <input
              type="text"
              name="username"
              placeholder="Username"
              required
            />
            <input
              type="password"
              name="password"
              placeholder="Password"
              required
            />
            <button type="submit" id="login-btn">
              <span id="icon-input" class="material-symbols-outlined"
                >input</span
              >
              <span id="icon-loading" class="material-symbols-outlined"
                >progress_activity</span
              >
              Proceed with login
            </button>
          </form>
        </div>
      </div>
    </div>

    <script>
      const loginBtn = document.getElementById("login-btn");
      const iconInput = document.getElementById("icon-input");
      const iconLoading = document.getElementById("icon-loading");

      // Use submit event on form instead of click on button
      document.querySelector("form").addEventListener("submit", () => {
        iconInput.style.display = "none";
        iconLoading.style.display = "inline-block";
        loginBtn.disabled = true;
      });
    </script>
  </body>
</html>
